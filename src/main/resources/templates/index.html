<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="layout :: head">
<style>
/* General page background */
body {
	background-color: #f8f9fa;
	font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Card styling */
.card {
	transition: transform 0.2s ease, box-shadow 0.2s ease;
	border: none;
	border-radius: 12px;
}

.card:hover {
	transform: translateY(-5px);
	box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

/* Card footer price style */
.card-footer span {
	color: #ffc107; /* gold price text */
	font-size: 1.1rem;
}

/* Pagination styling */
.pagination .page-link {
	color: #0d6efd;
	border-radius: 8px;
}

.pagination .page-link:hover {
	background-color: #0d6efd;
	color: white;
}

/* No books text */
.no-books {
	color: #6c757d;
	font-style: italic;
}

/* Search bar */
.form-control {
	border-radius: 8px;
}

.btn {
	border-radius: 8px;
}
</style>
</head>

<body>
	<nav th:replace="layout :: header"></nav>

	<div class="container my-4" id="main-content">

		<!-- Search Bar -->
		<div class="row mb-4">
			<div class="col-md-8 offset-md-2">
				<form class="input-group shadow-sm" th:action="@{/search}"
					method="get">
					<input class="form-control form-control-lg" type="search"
						name="term" placeholder="🔍 Search books by name..."
						aria-label="Search" />
					<button class="btn btn-primary btn-lg px-4" type="submit">
						<i class="fa fa-search me-2"></i> Search
					</button>
				</form>
			</div>
		</div>


		<!-- Success Alert -->
		<div class="row">
			<div class="col-12" th:if="${successMessage}">
				<div
					class="alert alert-success alert-dismissible fade show shadow-sm border-0 d-flex align-items-center"
					role="alert" id="successAlert">
					<i class="fa fa-check-circle me-2 fs-5"></i> <span
						class="fw-semibold" th:text="${successMessage}"></span>
					<button type="button" class="btn-close ms-auto"
						data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			</div>
		</div>

		<!-- No Books Message -->
		<th:block th:if="${#lists.isEmpty(bookPage.content)}">
			<div class="text-center mt-5 p-5 bg-light rounded shadow-sm">
				<i class="fa fa-book-open text-secondary mb-3"
					style="font-size: 3rem;"></i>
				<h4 class="text-muted fw-normal mb-3">📚 Oops... No books in
					stock right now</h4>
				<p class="text-secondary mb-4">Check back later or explore
					available categories.</p>
				<a th:href="@{/}"
					class="btn btn-outline-primary btn-lg rounded-pill shadow-sm">
					<i class="fa fa-arrow-left me-2"></i> Browse Books
				</a>
			</div>
		</th:block>




		<!-- Book Cards -->
		<th:block th:unless="${#lists.isEmpty(bookPage.content)}">
  <div class="row g-4">
    <div class="col-md-4" th:each="book : ${bookPage.content}">
      <div class="card h-100 shadow-lg border-0 rounded-4 overflow-hidden">
        
        <!-- Card Body -->
        <div class="card-body bg-gradient text-dark">
          <h5 class="card-title fw-bold text-primary" th:text="${book.name}"></h5>
          <p class="card-text mb-2 text-muted" th:text="${book.authors}"></p>
        </div>

        <!-- Book Details -->
        <ul class="list-group list-group-flush">
          <li class="list-group-item" th:text="${book.publisher}"></li>
          <li class="list-group-item" th:text="${book.publishedOn}"></li>
          <li class="list-group-item" th:text="${book.isbn}"></li>
        </ul>

        <!-- Footer -->
        <div class="card-footer d-flex justify-content-between align-items-center bg-light">
          <span class="fw-bold text-success fs-5" th:text="${book.price} + ' $'"></span>
          <form th:action="@{/cart/add/{id}(id=${book.id})}" method="get">
            <button class="btn btn-success btn-sm px-3" type="submit">
              <i class="fa fa-cart-plus me-1"></i> Add
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div class="row mt-5">
    <div class="col">
      <nav th:if="${bookPage.totalPages > 0}">
        <ul class="pagination justify-content-center pagination-lg">
          <li class="page-item" th:each="pageNumber : ${pageNumbers}">
            <a class="page-link shadow-sm rounded-3 mx-1"
               th:href="@{/(size=${bookPage.size}, page=${pageNumber})}"
               th:text="${pageNumber}"></a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</th:block>

	</div>
	<div th:replace="layout :: footer"></div>
	<!-- Auto-hide Success Alert -->
	<script>
  document.addEventListener("DOMContentLoaded", function() {
    const alert = document.getElementById("successAlert");
    if (alert) {
      setTimeout(() => {
        alert.classList.remove("show");
        alert.classList.add("fade");
      }, 4000); // fades out after 4 seconds
    }
  });
</script>
</body>
</html>
