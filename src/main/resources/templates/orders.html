<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="layout :: head"></head>

<body class="bg-light">
	<nav th:replace="layout :: header"></nav>

	<div class="container py-4" id="main-content">

		<!-- Top Actions Row -->
		<div class="row align-items-center mb-4">
			<div class="col-md-4 mb-2 mb-md-0">
				<form class="d-flex" action="#" th:action="@{/orders/search}"
					method="get">
					<input class="form-control me-2" type="search" name="term"
						placeholder="Search by date ..." />
					<button class="btn btn-primary" type="submit">
						<i class="fa fa-search"></i>
					</button>
				</form>
			</div>
			<div class="col-md-4 text-center">
				<a th:href="@{/book}" class="btn btn-info"> <i
					class="fa fa-list-ul"></i> Admin
				</a>
			</div>
			<div class="col-md-4 text-end">
				<a th:href="@{/logout}" class="btn btn-danger"> <i
					class="fa fa-key"></i> Log out
				</a>
			</div>
		</div>

		<!-- Success Alert -->
		<div th:if="${successMessage}"
			class="alert alert-success alert-dismissible fade show" role="alert">
			<i class="fa fa-check-circle"></i> <span th:text="${successMessage}"></span>
			<button type="button" class="btn-close" data-bs-dismiss="alert"
				aria-label="Close"></button>
		</div>

		<!-- Empty Orders -->
		<th:block th:if="${#lists.isEmpty(orderPage.content)}">
			<div class="text-center py-5">
				<i class="fa fa-box-open fa-3x text-muted mb-3"></i>
				<h5 class="text-muted">There are no current orders.</h5>
			</div>
		</th:block>

		<!-- Orders Table -->
		<th:block th:unless="${#lists.isEmpty(orderPage.content)}">
			<div class="card shadow-sm">
				<div class="card-header bg-black text-white">
					<i class="fa fa-receipt"></i> List of Orders
				</div>
				<div class="table-responsive">
    <table class="table table-hover align-middle mb-0 text-nowrap">
        <thead class="table-dark text-center">
            <tr>
                <th><i class="fa fa-id-badge"></i> Customer ID</th>
                <th><i class="fa fa-user"></i> Name</th>
                <th>Surname</th>
                <th>Country/Region</th>
                <th>Street & House No.</th>
                <th>City</th>
                <th>Postal code</th>
                <th><i class="fa fa-phone"></i> Phone</th>
                <th><i class="fa fa-envelope"></i> Email</th>
            </tr>
        </thead>

        <tbody class="text-center text-nowrap">
            <tr th:each="customerBooks, iStat : ${orderPage.content}">
                <td>
                    <a th:href="@{/orders/{id}(id=${customerBooks?.Customer?.id})}"
                       th:text="${customerBooks?.Customer?.id}"
                       class="text-decoration-none fw-bold"></a>
                </td>
                <td th:text="${customerBooks?.Customer?.name}"></td>
                <td th:text="${customerBooks?.Customer?.surname}"></td>
                <td th:text="${customerBooks?.Customer?.countryRegion}"></td>
                <td th:text="${customerBooks?.Customer?.streetAndHouseNumber}"></td>
                <td th:text="${customerBooks?.Customer?.city}"></td>
                <td th:text="${customerBooks?.Customer?.postalCode}"></td>
                <td th:text="${customerBooks?.Customer?.phoneNumber}"></td>
                <td th:text="${customerBooks?.Customer?.email}"></td>
            </tr>
        </tbody>
    </table>
</div>

				</div>
			</div>

			<!-- Pagination -->
			<div class="d-flex justify-content-center mt-4"
				th:if="${orderPage.totalPages > 0}">
				<nav aria-label="Page navigation">
					<ul class="pagination">
						<li class="page-item" th:each="pageNumber : ${pageNumbers}">
							<a
							th:href="@{/orders(size=${orderPage.size}, page=${pageNumber})}"
							th:text="${pageNumber}" class="page-link"></a>
						</li>
					</ul>
				</nav>
			</div>
		</th:block>

	
	<footer th:replace="layout :: footer"></footer>
</body>
</html>
